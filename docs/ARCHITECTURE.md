# æ¶æ„è®¾è®¡æ–‡æ¡£

## ğŸ¯ è®¾è®¡ç›®æ ‡

1. **å¯å¤ç”¨æ€§** - æ‰€æœ‰é¡¹ç›®éƒ½èƒ½ä½¿ç”¨åŒä¸€å¥—åŸºç¡€è®¾æ–½
2. **æ¨¡å—åŒ–** - æ¯ä¸ªæœåŠ¡ç‹¬ç«‹å¼€å‘ã€æµ‹è¯•ã€å‘å¸ƒ
3. **å¯æ‰©å±•æ€§** - è½»æ¾æ·»åŠ æ–°çš„MCPæœåŠ¡
4. **ç±»å‹å®‰å…¨** - ä½¿ç”¨TypeScriptç¡®ä¿ç±»å‹å®‰å…¨
5. **æ˜“ç»´æŠ¤** - æ¸…æ™°çš„ä»£ç ç»“æ„å’Œæ–‡æ¡£

## ğŸ—ï¸ Monorepoæ¶æ„

```
mcp-infrastructure/
â”œâ”€â”€ packages/
â”‚   â”œâ”€â”€ shared/                    # å…±äº«å·¥å…·åº“
â”‚   â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”‚   â”œâ”€â”€ types.ts          # é€šç”¨ç±»å‹å®šä¹‰
â”‚   â”‚   â”‚   â”œâ”€â”€ utils.ts          # å·¥å…·å‡½æ•°
â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”‚   â”œâ”€â”€ package.json
â”‚   â”‚   â””â”€â”€ tsconfig.json
â”‚   â”‚
â”‚   â””â”€â”€ ai-model-server/           # AIæ¨¡å‹è°ƒç”¨æœåŠ¡
â”‚       â”œâ”€â”€ src/
â”‚       â”‚   â”œâ”€â”€ providers/        # AIæä¾›å•†å®ç°
â”‚       â”‚   â”‚   â”œâ”€â”€ base.ts       # åŸºç±»
â”‚       â”‚   â”‚   â”œâ”€â”€ openai.ts     # OpenAIå…¼å®¹
â”‚       â”‚   â”‚   â””â”€â”€ anthropic.ts  # Anthropic
â”‚       â”‚   â””â”€â”€ index.ts          # MCPæœåŠ¡å™¨å…¥å£
â”‚       â”œâ”€â”€ package.json
â”‚       â””â”€â”€ tsconfig.json
â”‚
â”œâ”€â”€ examples/                      # ä½¿ç”¨ç¤ºä¾‹
â”œâ”€â”€ docs/                          # æ–‡æ¡£
â”œâ”€â”€ package.json                   # æ ¹é…ç½®
â”œâ”€â”€ pnpm-workspace.yaml           # workspaceé…ç½®
â””â”€â”€ tsconfig.base.json            # åŸºç¡€TSé…ç½®
```

## ğŸ“¦ åŒ…ä¾èµ–å…³ç³»

```
ai-model-server
    â†“ depends on
shared (workspace:*)
```

ä½¿ç”¨ `workspace:*` åè®®ç¡®ä¿å§‹ç»ˆä½¿ç”¨æœ¬åœ°æœ€æ–°ç‰ˆæœ¬ã€‚

## ğŸ”„ å·¥ä½œæµç¨‹

### å¼€å‘æµç¨‹

1. **ä¿®æ”¹ä»£ç ** - åœ¨ `packages/*/src` ä¸­ä¿®æ”¹
2. **è‡ªåŠ¨ç¼–è¯‘** - `pnpm dev` ç›‘å¬æ–‡ä»¶å˜åŒ–
3. **æµ‹è¯•** - åœ¨å…¶ä»–é¡¹ç›®ä¸­é€šè¿‡ `pnpm link` æµ‹è¯•
4. **æäº¤** - Gitæäº¤åˆ°ç‹¬ç«‹ä»“åº“

### å‘å¸ƒæµç¨‹

1. **æ›´æ–°ç‰ˆæœ¬** - `pnpm version patch/minor/major`
2. **æ„å»º** - `pnpm build`
3. **å‘å¸ƒ** - `pnpm publish` (å¯é€‰ï¼Œå¦‚æœè¦å‘å¸ƒåˆ°NPM)

## ğŸ”Œ é›†æˆæ–¹å¼

### æ–¹å¼1ï¼šæœ¬åœ°é“¾æ¥ï¼ˆå¼€å‘æ¨èï¼‰

```bash
# åœ¨åŸºç¡€è®¾æ–½ä»“åº“
cd packages/ai-model-server
pnpm link --global

# åœ¨ä¸šåŠ¡é¡¹ç›®
pnpm link --global @mcp-infra/ai-model-server
```

**ä¼˜ç‚¹**ï¼š
- å®æ—¶åŒæ­¥ä¿®æ”¹
- æ— éœ€é‡æ–°å®‰è£…
- é€‚åˆå¿«é€Ÿè¿­ä»£

### æ–¹å¼2ï¼šç›¸å¯¹è·¯å¾„

```json
{
  "dependencies": {
    "@mcp-infra/ai-model-server": "file:../mcp-infrastructure/packages/ai-model-server"
  }
}
```

**ä¼˜ç‚¹**ï¼š
- æ˜ç¡®çš„ä¾èµ–å…³ç³»
- é€‚åˆå¤šé¡¹ç›®å¼€å‘

### æ–¹å¼3ï¼šNPMåŒ…ï¼ˆç”Ÿäº§æ¨èï¼‰

```bash
pnpm add @mcp-infra/ai-model-server
```

**ä¼˜ç‚¹**ï¼š
- ç‰ˆæœ¬é”å®š
- é€‚åˆç”Ÿäº§ç¯å¢ƒ
- å›¢é˜Ÿåä½œå‹å¥½

## ğŸš€ æ‰©å±•æŒ‡å—

### æ·»åŠ æ–°çš„MCPæœåŠ¡

1. åœ¨ `packages/` ä¸‹åˆ›å»ºæ–°ç›®å½•
2. åˆå§‹åŒ– `package.json`
3. åˆ›å»º `src/index.ts` å®ç°MCPæ¥å£
4. æ·»åŠ åˆ° `pnpm-workspace.yaml`
5. æ›´æ–°æ ¹ `README.md`

### æ·»åŠ æ–°çš„AIæä¾›å•†

1. åœ¨ `packages/ai-model-server/src/providers/` åˆ›å»ºæ–°æ–‡ä»¶
2. ç»§æ‰¿ `AIProvider` åŸºç±»
3. å®ç° `chat()` å’Œ `streamChat()` æ–¹æ³•
4. åœ¨ `index.ts` ä¸­æ³¨å†Œ

## ğŸ“Š æ€§èƒ½è€ƒè™‘

1. **æŒ‰éœ€åŠ è½½** - åªåŠ è½½ä½¿ç”¨çš„æä¾›å•†
2. **ç±»å‹ç¼“å­˜** - TypeScriptç¼–è¯‘ç¼“å­˜
3. **å¹¶è¡Œæ„å»º** - pnpmå¹¶è¡Œæ„å»ºå¤šä¸ªåŒ…
4. **å¢é‡ç¼–è¯‘** - åªç¼–è¯‘ä¿®æ”¹çš„æ–‡ä»¶

## ğŸ”’ å®‰å…¨æœ€ä½³å®è·µ

1. **ç¯å¢ƒå˜é‡** - APIå¯†é’¥é€šè¿‡ç¯å¢ƒå˜é‡ä¼ é€’
2. **ä¸æäº¤å¯†é’¥** - `.gitignore` åŒ…å« `.env`
3. **æœ€å°æƒé™** - åªè¯·æ±‚å¿…è¦çš„APIæƒé™
4. **é”™è¯¯å¤„ç†** - ä¸åœ¨é”™è¯¯ä¿¡æ¯ä¸­æš´éœ²æ•æ„Ÿä¿¡æ¯

## ğŸ§ª æµ‹è¯•ç­–ç•¥

1. **å•å…ƒæµ‹è¯•** - æµ‹è¯•å•ä¸ªå‡½æ•°å’Œç±»
2. **é›†æˆæµ‹è¯•** - æµ‹è¯•MCPæœåŠ¡å™¨å®Œæ•´æµç¨‹
3. **ç«¯åˆ°ç«¯æµ‹è¯•** - åœ¨å®é™…é¡¹ç›®ä¸­æµ‹è¯•

## ğŸ“ æ–‡æ¡£è§„èŒƒ

æ¯ä¸ªåŒ…å¿…é¡»åŒ…å«ï¼š
- `README.md` - ä½¿ç”¨è¯´æ˜
- `CHANGELOG.md` - ç‰ˆæœ¬å˜æ›´è®°å½•
- ä»£ç æ³¨é‡Š - JSDocæ ¼å¼
- ç±»å‹å®šä¹‰ - å®Œæ•´çš„TypeScriptç±»å‹